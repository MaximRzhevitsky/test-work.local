export function maybeNeedClick(e,t){let n=Array.from(document.querySelectorAll(`[href="#${e}"]`));if(t&&(n=n.filter((e=>!e.isEqualNode(t)))),n.length){const e=new Event("click",{detail:{runMaybeNeedClick:!0}});return n[0].dispatchEvent(e),!0}return!1}export function maybeScrollTo(e,t){if(e.startsWith("#!"))return;if(e.startsWith("#")&&(e=e.slice(1)),t&&!0!==t.detail.runMaybeNeedClick&&maybeNeedClick(e,t.currentTarget))return;let n=document.getElementById(e);n||(n=document.getElementsByName(`[name=${e}]`)[0]||null),n&&scrollToElement(n).then()}export function smoothScroll(e,t){let n,o,r=!1;const i=document.querySelector(".page-header"),l=i?i.getBoundingClientRect().height:0,c=e.getBoundingClientRect().top-l-t,u=c>1e3?1e3:500,s=c/(u/60);return new Promise((l=>{const c=a=>{void 0===n&&(n=a);const d=a-n,m=i?i.getBoundingClientRect().height:0,g=e.getBoundingClientRect().top-m-t;if(o!==a){const e=g<0?Math.max(s,g):Math.min(s,g);e===g&&(r=!0),window.scrollBy(0,e)}d<u||r?(o=a,r?l(e):requestAnimationFrame(c)):(window.scrollBy(0,g),l(e))};requestAnimationFrame(c)}))}export function restoreFocus(e){const t=e.getAttribute("tabindex");e.setAttribute("tabindex","0"),e.focus(),t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}export function scrollToElement(e,t=18){return smoothScroll(e,t).then(restoreFocus)}